/*!
 * flipnote.js v1.2.0
 * Real-time, browser-based playback of Flipnote Studio's .ppm animation format
 * 2018 James Daniel
 * github.com/jaames/flipnote.js
 * Flipnote Studio is (c) Nintendo Co., Ltd.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.flipnote=t():e.flipnote=t()}(this,function(){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.e?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function a(e){return e&&e.e?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(3),o=a(s),u=r(4),l=a(u),f=function(){function e(t,r,a,i){n(this,e),t.width=r||256,t.height=a||192;var s=t.getContext("webgl",i||{antialias:!1}),u=s.createProgram();this.program=u,this.el=t,this.gl=s,this.t(s.VERTEX_SHADER,o.default),this.t(s.FRAGMENT_SHADER,l.default),s.linkProgram(u),s.useProgram(u);var f=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,f),s.bufferData(s.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,1,1,-1,-1,1,-1]),s.STATIC_DRAW),s.enableVertexAttribArray(0),s.vertexAttribPointer(0,2,s.FLOAT,!1,0,0),this.r("u_layer1Bitmap",0,s.TEXTURE0),this.r("u_layer2Bitmap",1,s.TEXTURE1)}return i(e,[{key:"_createShader",value:function(e,t){var r=this.gl,a=r.createShader(e);r.shaderSource(a,t),r.compileShader(a),r.attachShader(this.program,a)}},{key:"_createTexture",value:function(e,t,r){var a=this.gl;a.uniform1i(a.getUniformLocation(this.program,e),t),a.activeTexture(r),a.bindTexture(a.TEXTURE_2D,a.createTexture()),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)}},{key:"setColor",value:function(e,t){this.gl.uniform4f(this.gl.getUniformLocation(this.program,e),t[0]/255,t[1]/255,t[2]/255,t[3]/255)}},{key:"setPalette",value:function(e){this.setColor("u_paperColor",e[0]),this.setColor("u_layer1Color",e[1]),this.setColor("u_layer2Color",e[2])}},{key:"setBitmaps",value:function(e){var t=this.gl;t.activeTexture(t.TEXTURE0),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,192,0,t.ALPHA,t.UNSIGNED_BYTE,e[0]),t.activeTexture(t.TEXTURE1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,192,0,t.ALPHA,t.UNSIGNED_BYTE,e[1])}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:192;this.el.width=e,this.el.height=t,this.gl.viewport(0,0,e,t)}},{key:"refresh",value:function(){this.gl.drawArrays(this.gl.TRIANGLES,0,6)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}}]),e}();t.default=f},function(e,t,r){"use strict";var a=r(2),n=function(e){return e&&e.e?e:{default:e}}(a);e.exports={version:"1.2.0",player:n.default}},function(e,t,r){"use strict";function a(e){return e&&e.e?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=r(0),o=a(s),u=r(5),l=a(u),f=r(6),h=a(f),c=r(9),d=a(c),_=r(13),p=a(_),m={1:.5,2:1,3:2,4:4,5:6,6:12,7:20,8:30},v=function(){function e(t,r,a){n(this,e),t="string"==typeof t?document.querySelector(t):t,this.canvas=new o.default(t,r,a),this.a=new l.default,this.u=!1,this.loop=!1,this.currentFrame=0,this.paused=!0}return i(e,[{key:"_load",value:function(e){var t=new h.default(e),r=t.meta;this.ppm=t,this.meta=r,this.frameCount=t.frameCount,this.frameSpeed=t.frameSpeed,this.loop=1==r.loop,this.f=t.soundMeta.bgm.length>0?new p.default(this.ppm.decodeAudio("bgm")):null,this.f&&(this.f.playbackRate=this.h),this._=[t.soundMeta.se1.length>0?new p.default(this.ppm.decodeAudio("se1")):null,t.soundMeta.se2.length>0?new p.default(this.ppm.decodeAudio("se2")):null,t.soundMeta.se3.length>0?new p.default(this.ppm.decodeAudio("se3")):null],this.v=this.ppm.decodeSoundFlags(),this.u=!0,this.paused=!0,this.y=0,this.g=0,this.b={},this.k=!1,this.setFrame(this.ppm.thumbFrameIndex),this.emit("load")}},{key:"open",value:function(e){var t=this;this.u&&this.close(),(0,d.default)(e).then(function(e){t.T(e)}).catch(function(e){console.error("Error loading Flipnote:",e)})}},{key:"close",value:function(){this.ppm=null,this.u=!1,this.paused=!0,this.loop=null,this.meta=null,this.frameCount=null,this.frameSpeed=null,this.F=0,this.f=null,this._=new Array(3),this.v=null,this.k=null,this.canvas.clear()}},{key:"_playFrameSe",value:function(e){for(var t=this.v[e],r=0;r<t.length;r++)t[r]&&this._[r]&&this._[r].start()}},{key:"_playBgm",value:function(){this.f&&this.f.start(this.currentTime)}},{key:"_playbackLoop",value:function(e){var t=(e-this.g)/(1e3/60),r=this.currentFrame;this.y>=60/this.framerate&&(this.U(r),this.nextFrame(),this.y=0),r==this.frameCount-1&&(this.loop?(this.firstFrame(),this.A(),this.emit("playback:loop")):(this.pause(),this.emit("playback:end"))),this.y+=t,this.g=e,this.paused||requestAnimationFrame(this.w.bind(this))}},{key:"play",value:function(){if(!this.u)return null;this.paused=!1,this.k&&(this.loop||this.currentFrame!=this.frameCount-1)||(this.F=0),this.g=performance.now(),this.A(),this.w(this.g),this.k=!0,this.emit("playback:start")}},{key:"pause",value:function(){if(!this.u)return null;this.paused=!0,this.f&&this.f.stop(),this.emit("playback:stop")}},{key:"getFrameImage",value:function(e,t,r){return this.u?(e=Math.max(0,Math.min(e,this.frameCount-1)),this.a.setPalette(this.ppm.getFramePalette(e)),this.a.setBitmaps(this.ppm.decodeFrame(e)),this.a.refresh(),this.a.toImage(t,r)):null}},{key:"getThumbImage",value:function(e,t){return this.getFrameImage(this.ppm.thumbFrameIndex,e,t)}},{key:"setFrame",value:function(e){if(!this.u)return null;e=Math.max(0,Math.min(e,this.frameCount-1)),this.F=e,this.y=0,this.canvas.setPalette(this.ppm.getFramePalette(e)),this.canvas.setBitmaps(this.ppm.decodeFrame(e)),this.canvas.refresh()}},{key:"thumbnailFrame",value:function(){this.currentFrame=this.ppm.thumbFrameIndex}},{key:"nextFrame",value:function(){this.loop&&this.currentFrame>=this.frameCount-1?this.currentFrame=0:this.currentFrame+=1}},{key:"prevFrame",value:function(){this.loop&&this.currentFrame<=0?this.currentFrame=this.frameCount-1:this.currentFrame-=1}},{key:"lastFrame",value:function(){this.currentFrame=this.frameCount-1}},{key:"firstFrame",value:function(){this.currentFrame=0}},{key:"resize",value:function(e,t){this.canvas.resize(e,t)}},{key:"on",value:function(e,t){var r=this.b;(r[e]||(r[e]=[])).push(t)}},{key:"off",value:function(e,t){var r=this.b[e];r&&r.splice(r.indexOf(t),1)}},{key:"emit",value:function(e){for(var t=this.b[e]||[],r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];for(var i=0;i<t.length;i++)t[i].apply(null,a)}},{key:"currentFrame",get:function(){return this.F},set:function(e){this.setFrame(e)}},{key:"currentTime",get:function(){return this.u?this.currentFrame*(1/this.framerate):null},set:function(e){this.u&&e<this.duration&&e>0&&(this.setFrame(Math.round(e/(1/this.framerate))),this.y=0)}},{key:"duration",get:function(){return this.u?this.frameCount*(1/this.framerate):null}},{key:"framerate",get:function(){return m[this.frameSpeed]}},{key:"_audiorate",get:function(){return 1/m[this.ppm.bgmSpeed]/(1/m[this.frameSpeed])}}]),e}();t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["attribute vec4 a_position;","varying vec2 v_texcoord;","void main() {","gl_Position = a_position;","v_texcoord = a_position.xy * vec2(0.5, -0.5) + 0.5;","}"].join("\n")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["precision lowp float;","varying vec2 v_texcoord;","uniform vec4 u_paperColor;","uniform vec4 u_layer1Color;","uniform vec4 u_layer2Color;","uniform sampler2D u_layer1Bitmap;","uniform sampler2D u_layer2Bitmap;","void main() {","float layer1 = texture2D(u_layer1Bitmap, v_texcoord).a;","float layer2 = texture2D(u_layer2Bitmap, v_texcoord).a;","gl_FragColor = (layer1 == 0.0) ? (layer2 == 0.0) ? u_paperColor : u_layer2Color : u_layer1Color;","}"].join("\n")},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(0),u=function(e){return e&&e.e?e:{default:e}}(o),l=function(e){function t(){return a(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,document.createElement("canvas"),256,192,{antialias:!1,preserveDrawingBuffer:!0}))}return i(t,e),s(t,[{key:"toImage",value:function(e,t){return this.el.toDataURL(e,t)}}]),t}(u.default);t.default=l},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(7),u=function(e){return e&&e.e?e:{default:e}}(o),l=r(8),f=256,h=192,c=[14,14,14,255],d=[255,255,255,255],_=[10,57,255,255],p=[255,42,42,255],m=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.seek(4),r.x=r.readUint32(),r.P=r.readUint32(),r.frameCount=Math.min(r.readUint16()+1,999),r.seek(18),r.thumbFrameIndex=r.readUint16(),r.seek(1696);var i=r.readUint16();return r.seek(1704),r.O=new Uint32Array(i/4).map(function(e){return 1704+i+r.readUint32()}),r.meta=r.C(),r.S(),r.R=[new Uint8Array(f*h),new Uint8Array(f*h)],r.M=[new Uint8Array(f*h),new Uint8Array(f*h)],r.j=0,r}return i(t,e),s(t,[{key:"_seekToFrame",value:function(e){this.seek(this.O[e])}},{key:"_seekToAudio",value:function(e){this.seek(this.soundMeta[e].offset)}},{key:"_readUtf16",value:function(e){for(var t="",r=!1,a=0;a<e/2;a++){var n=this.readUint16();r||0==n?r=!0:t+=String.fromCharCode(n)}return t}},{key:"_readHex",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],a=0;a<e;a++)r.push(this.readUint8().toString(16).padStart(2,"0"));return t&&r.reverse(),r.join("").toUpperCase()}},{key:"_readFilename",value:function(){var e="";e+=this.L(3)+"_";for(var t=0;t<13;t++)e+=String.fromCharCode(this.readUint8());return e+="_",e+=this.readUint16().toString().padStart(3,"0")}},{key:"_readLineEncoding",value:function(){for(var e=new Uint8Array(h),t=0;t<48;t++)for(var r=this.readUint8(),a=0;a<8;a+=2)e[4*t+a/2]=r>>a&3;return e}},{key:"_decodeMeta",value:function(){this.seek(16);var e=this.readUint16(),t=this.readInt16(),r=this.I(22),a=this.I(22),n=this.I(22),i=this.L(8,!0),s=this.L(8,!0),o=this.D(),u=this.D(),l=this.L(8,!0);this.seek(154);var f=new Date(1e3*(this.readUint32()+946684800));return this.seek(27232),{lock:e,loop:this.readUint16()>>1&1,frame_count:this.frameCount,thumb_index:t,timestamp:f,spinoff:s!==i,root:{username:r,fsid:l},parent:{username:a,fsid:i,filename:o},current:{username:n,fsid:s,filename:u}}}},{key:"_decodeSoundHeader",value:function(){var e=1696+this.x+this.frameCount;e%4!=0&&(e+=4-e%4),this.seek(e);var t=this.readUint32(),r=this.readUint32(),a=this.readUint32(),n=this.readUint32();this.frameSpeed=8-this.readUint8(),this.bgmSpeed=8-this.readUint8(),e+=32,this.soundMeta={bgm:{offset:e,length:t},se1:{offset:e+=t,length:r},se2:{offset:e+=r,length:a},se3:{offset:e+=a,length:n}}}},{key:"_isFrameNew",value:function(e){return this.B(e),this.readUint8()>>7&1}},{key:"_decodePrevFrames",value:function(e){for(var t=0,r=0;!r;)t+=1,r=this.X(e-t);for(t=e-t;t<e;)this.decodeFrame(t,!1),t+=1;this.B(e),this.seek(1,1)}},{key:"getFramePalette",value:function(e){this.B(e);var t=this.readUint8(),r=1&t,a=[null,1==r?c:d,p,_];return[1==r?d:c,a[t>>1&3],a[t>>3&3]]}},{key:"decodeFrame",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.B(e);var r=this.readUint8(),a=r>>7&1,n=r>>5&3,i=0,s=0;t&&!a&&e!==this.j+1&&this.H(e),this.M[0].set(this.R[0]),this.M[1].set(this.R[1]),this.j=e,this.R[0].fill(0),this.R[1].fill(0),n&&(i=this.readInt8(),s=this.readInt8());for(var o=[this.N(),this.N()],u=0;u<2;u++)for(var l=this.R[u],c=0;c<h;c++){var d=c*f,_=o[u][c];switch(_){case 0:break;case 1:case 2:var p=this.readUint32(!1);for(2==_&&l.fill(1,d,d+f);4294967295&p;){if(2147483648&p)for(var m=this.readUint8(),v=0;v<8;v++)l[d+v]=m>>v&1;d+=8,p<<=1}break;case 3:for(;d<(c+1)*f;){for(var m=this.readUint8(),v=0;v<8;v++)l[d+v]=m>>v&1;d+=8}}}if(!a)for(var y,g,b,k=0;k<h;k++)for(var T=0;T<f;T++)y=T+k*f,g=y-(i+s*f),b=T-i>f||T-i<0,this.R[0][y]=b?this.R[0][y]:this.R[0][y]^this.M[0][g],this.R[1][y]=b?this.R[1][y]:this.R[1][y]^this.M[1][g];return this.R}},{key:"decodeAudio",value:function(e){var t=this;this.G(e);var r=new Uint8Array(this.soundMeta[e].length).map(function(e){return t.readUint8()});return(0,l.decodeAdpcm)(r)}},{key:"decodeSoundFlags",value:function(){var e=this;return this.seek(1696+this.x),new Array(this.frameCount).fill([]).map(function(t){var r=e.readUint8();return[1&r,r>>1&1,r>>2&1]})}}]),t}(u.default);t.default=m},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(){function e(t){a(this,e),this.Y=new DataView(t),this.q=0}return n(e,[{key:"seek",value:function(e,t){switch(t){case 2:this.q=this.Y.byteLength+e;break;case 1:this.q+=e;break;case 0:default:this.q=e}}},{key:"readUint8",value:function(){var e=this.Y.getUint8(this.q);return this.q+=1,e}},{key:"readInt8",value:function(){var e=this.Y.getInt8(this.q);return this.q+=1,e}},{key:"readUint16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.Y.getUint16(this.q,e);return this.q+=2,t}},{key:"readInt16",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.Y.getInt16(this.q,e);return this.q+=2,t}},{key:"readUint32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.Y.getUint32(this.q,e);return this.q+=4,t}},{key:"readInt32",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.Y.getInt32(this.q,e);return this.q+=4,t}},{key:"fileLength",get:function(){return this.Y.byteLength}}]),e}();t.default=i},function(e,t,r){"use strict";function a(e){u=0,l=0;for(var t=new Float32Array(2*e.length),r=0,a=0;a<e.length;a++){var i=e[a];t[r]=n(15&i),t[r+1]=n(i>>4&15),r+=2}return t}function n(e){var t=u,r=l,a=o[r],n=a>>3;return 4&e&&(n+=a),2&e&&(n+=a>>1),1&e&&(n+=a>>2),t+=8&e?-n:n,r+=s[e],r=i(r,0,88),t=i(t,-32767,32767),u=t,l=r,t/32768}function i(e,t,r){return e<=t?t:e>=r?r:e}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeAdpcm=a;var s=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],o=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767],u=0,l=0},function(e,t,r){"use strict";function a(e){return e&&e.e?e:{default:e}}function n(e){return new Promise(function(t,r){for(var a=0;a<h.length;a++){var n=h[a];if(n.matches(e)){n.load(e,t,r);break}}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(10),s=a(i),o=r(11),u=a(o),l=r(12),f=a(l),h=[s.default,u.default,f.default]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={matches:function(e){return"string"==typeof e},load:function(e,t,r){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onreadystatechange=function(e){4===a.readyState&&(a.status>=200&&a.status<300?t(a.response):r({type:"httpError",status:a.status,statusText:a.statusText}))},a.send(null)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={matches:function(e){return!1},load:function(e,t,r){r()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={matches:function(e){return e instanceof ArrayBuffer},load:function(e,t,r){t(e)}}},function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function(){function e(t){a(this,e);var r=new AudioContext,n=r.createBuffer(1,t.length,8192);n.copyToChannel(t,0);this.audioBuffer=n,this.source=null,this.paused=!0,this.ctx=r,this.playbackRate=1}return n(e,[{key:"start",value:function(e){var t=this;this.source=this.ctx.createBufferSource(),this.source.buffer=this.audioBuffer,this.source.connect(this.ctx.destination),this.source.onended=function(e){t.paused=!0},this.source.playbackRate.value=this.playbackRate,this.source.start(0,e),this.paused=!1}},{key:"stop",value:function(){this.source&&this.source.stop(),this.source=null,this.paused=!0}}]),e}();t.default=i}])});